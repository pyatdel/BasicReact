<!DOCTYPE html>
<meta charset="UTF-8">
<script>
//var test = {};
//test["0"] = "요렇게 배열식 접근법" 


// 배열 만들어 보아요
function SuminArray(){
  this.length = 0;

  // let arr = new SuminArray();  // 새로운 SuminArray 객체 생성과 같음

  return this; // 생략 가능
}


// push 메소드, 배열의 끝에 새 요소 추가
SuminArray.prototype.push = function(pVal){
    this[this.length] = pVal;
    this.length++;
    return this; // 이 한줄로 메소드 체인닝 완성
}

// forEach 메소드
SuminArray.prototype.forEach=function(pCB){
   for(let i=0; i<this.length; i++){
      pCB(this[i],i)
   }
}

// filter 메소드, 골라서 담은 새로운 배열을 리턴해줌
SuminArray.prototype.filter = function(pCB){
      let filterArr = [];  // 빈 배열 생성
      for(let i=0; i<this.length; i++){
         if(pCB(this[i],i)){
            filterArr.push(this[i]);   
         }
      } 
      return filterArr;  // 새로 담은 배열 리턴
}

// map 메소드, 배열 개별요소 값 변경, 새 배열을 리턴
SuminArray.prototype.map = function(pCB){
      const newArr = [];
      for(let i=0; i<this.length; i++){
          newArr.push(pCB(this[i],i));
      }
      return newArr;
}

// 기본 배열 생성 
let testArr = new SuminArray();
testArr.push("수민").push("지영").push("순건");
console.log("기본 배열:", testArr);

/* 
// 예제 1: forEach 사용
console.log("--- forEach 예제 ---");
testArr.forEach(function(elem, index) {
    console.log(`${index}번째는 ${elem}입니다`);
});
*/

// 예제 2: filter 사용
/*
console.log("--- filter 예제 ---");
let filteredArr = testArr.filter(function(elem, index) {
    return index === 2;
});
console.log("filter 결과:", filteredArr);
*/

// 예제 3: map 사용
/*
console.log("--- map 예제 ---");
let mapArr = testArr.map(function(elem, index) {
    if(elem == "수민") {
        return `<h1>${elem}</h1>`;
    }
    return `<h2>${elem}</h2>`;
});
console.log("map 결과:", mapArr);
*/

// 예제 4: 메서드 체이닝 (filter와 map 조합)
/*
console.log("--- 메서드 체이닝 예제 ---");
let chainResult = testArr
    .filter(function(elem, index) { return index !== 1; })
    .map(function(elem) { return elem.toUpperCase(); });
console.log("체이닝 결과:", chainResult);
*/

</script>